<!doctype html>
<html lang="id" class="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Page Sharing Undangan Digital - Kirim Pesan WhatsApp Otomatis</title>
  <meta name="description" content="Kirim undangan pernikahan digital ke banyak nama secara otomatis lewat WhatsApp. Mudah, cepat, dan personal.">
  <meta name="keywords" content="undangan pernikahan, share WhatsApp, undangan digital, kirim pesan otomatis, undangan pernikahan online">
  <meta property="og:title" content="Halaman Sharing Undangan Digital Kirim ke WhatsApp FREE">
  <meta property="og:description" content="Kirim undangan pernikahan digital secara otomatis ke banyak nama lewat WhatsApp.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://weblynk.pages.dev/wedding/thumbnail.jpg">
  <meta property="og:url" content="https://weblynk.pages.dev/wedding/">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class'
    }
  </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 antialiased transition-colors duration-300">
  <main class="max-w-3xl mx-auto p-6">
    <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 transition-colors duration-300">
      <header class="text-center mb-4">
        <h1 class="text-2xl font-semibold text-green-700 dark:text-green-400">Page Sharing Undangan Digital via WhatsApp</h1>
        <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">Kirim pesan undangan pernikahan ke banyak nama secara personal dan cepat.</p>
        <button id="toggleDark" class="mt-4 px-3 py-1 rounded-lg border text-sm dark:border-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition">ğŸŒ™ Mode Gelap</button>
      </header>

      <form class="space-y-4" onsubmit="return false;">
        <div>
          <label for="names" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Daftar Nama</label>
          <p class="text-xs text-gray-500 dark:text-gray-400">Satu nama per baris atau dipisah koma. Untuk nomor+nama gunakan <code>081234567890|Nama</code></p>
          <textarea id="names" class="mt-2 w-full min-h-[120px] p-3 border rounded-lg resize-vertical text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100" placeholder="Contoh:\nBudi\nSiti\nAndi\natau: Budi, Siti, Andi"></textarea>
        </div>

        <div>
          <label for="link" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Link Undangan</label>
          <p class="text-xs text-gray-500 dark:text-gray-400">Masukkan link undangan utama, nama akan otomatis ditambahkan di belakang URL.</p>
          <input id="link" type="url" class="mt-2 w-full p-3 border rounded-lg text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100" placeholder="https://weblynk.pages.dev/wedding/?to=">
        </div>

        <div>
          <label for="template" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Template Pesan Undangan</label>
          <p class="text-xs text-gray-500 dark:text-gray-400">Gunakan <code>{name}</code> untuk menyisipkan nama penerima. Tekan Enter untuk baris baru.</p>
          <textarea id="template" class="mt-2 w-full min-h-[200px] p-3 border rounded-lg resize-vertical text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100" rows="12">Tanpa mengurangi rasa hormat, perkenankan kami mengundang Bapak/Ibu/Saudara/i {name} untuk menghadiri acara pernikahan kami.

*Ainul Istiqomah & Luthfi Abdilah*

*Acara Pernikahan*
Akan dilaksanakan pada :
Hari, tanggal : Sabtu, 25 Oktober 2025
Jam : 08.00 WIB s/d Selesai
Lokasi : Blok C Embacang Permai Mesuji Raya Kab OKI Sumatera Selatan

Berikut link undangan kami, untuk info lengkap dari acara bisa kunjungi :

*{{link}}{nameUrl}*

Merupakan suatu kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan untuk hadir dan memberikan doa restu.

Mohon maaf perihal undangan hanya dibagikan melalui pesan ini.

Terima kasih banyak atas perhatiannya.</textarea>
        </div>

        <div class="flex flex-wrap gap-2 justify-center">
          <button id="genBtn" class="px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700">Buat Pesan</button>
        </div>
      </form>

      <div id="list" class="mt-6 space-y-3"></div>

      <p class="text-xs text-gray-500 dark:text-gray-400 mt-6">Catatan: Tombol WhatsApp membuka <code>https://wa.me/?text=...</code> â€” pada WhatsApp Web/HP pengguna bisa memilih penerima. Jika ingin mengirim langsung ke nomor tertentu, masukkan nomor dengan format internasional (tanpa +) di samping nama, misal: <em>081234567890|Budi</em>.</p>
    </section>

    <footer class="text-center text-sm text-gray-500 dark:text-gray-400 mt-6">Â© <script type="text/javascript">
  document.write(new Date().getFullYear());
</script> Bagikan Undangan Digital - Dibuat oleh Eko Sodikul dengan â¤ï¸ untuk kemudahan berbagi momen bahagia.</footer>
  </main>

  <script>
    const namesEl = document.getElementById('names')
    const tplEl = document.getElementById('template')
    const linkEl = document.getElementById('link')
    const genBtn = document.getElementById('genBtn')
    const listEl = document.getElementById('list')
    const copyAllBtn = document.getElementById('copyAllBtn')
    const openAllBtn = document.getElementById('openAllBtn')
    const toggleDark = document.getElementById('toggleDark')

    function parseNames(raw){
      if(!raw) return []
      const parts = raw.split(/[\n,]+/).map(s=>s.trim()).filter(Boolean)
      return parts.map(p=>{
        const parts2 = p.split('|').map(x=>x.trim())
        if(parts2.length===2){return {phone:parts2[0], name:parts2[1]}}
        return {phone:null, name:parts2[0]}
      })
    }

    function makeMessage(template, name, linkBase){
      const nameUrl = name.trim().replace(/ /g, '%20') // ubah manual tanpa encodeURIComponent untuk hindari %2520
      const link = linkBase ? linkBase + nameUrl : ''
      return template.replace(/\{name\}/gi, name).replace(/\{\{link\}\}\{nameUrl\}/gi, link)
    }

    function createItem(msg, p){
      const item = document.createElement('div')
      item.className = 'bg-gray-50 dark:bg-gray-700 border dark:border-gray-600 rounded-lg p-3 shadow-sm transition-colors duration-300'

      const msgDiv = document.createElement('div')
      msgDiv.className = 'text-sm text-gray-800 dark:text-gray-100 whitespace-pre-wrap'
      msgDiv.textContent = msg

      const btnWrap = document.createElement('div')
      btnWrap.className = 'mt-3 flex flex-wrap gap-2'

      const openBtn = document.createElement('button')
      openBtn.className = 'px-3 py-1 rounded-md border text-sm text-gray-700 dark:text-gray-200 dark:border-gray-500 hover:bg-gray-100 dark:hover:bg-gray-600'
      openBtn.textContent = p.phone ? 'Kirim ke ' + p.phone : 'Buka di WhatsApp'
      openBtn.addEventListener('click', ()=>{
        const encoded = encodeURIComponent(msg)
        let url = 'https://wa.me/?text=' + encoded
        if(p.phone){
          const num = p.phone.replace(/[^0-9]/g,'')
          url = 'https://wa.me/' + num + '?text=' + encoded
        }
        window.open(url, '_blank')
      })

      const copyBtn = document.createElement('button')
      copyBtn.className = 'px-3 py-1 rounded-md border text-sm text-gray-700 dark:text-gray-200 dark:border-gray-500 hover:bg-gray-100 dark:hover:bg-gray-600'
      copyBtn.textContent = 'Salin Pesan'
      copyBtn.addEventListener('click', async ()=>{
        try{await navigator.clipboard.writeText(msg); alert('Pesan disalin ke clipboard.')}catch(e){prompt('Salin manual:', msg)}
      })

      btnWrap.appendChild(openBtn)
      btnWrap.appendChild(copyBtn)
      item.appendChild(msgDiv)
      item.appendChild(btnWrap)
      return item
    }

    genBtn.addEventListener('click', ()=>{
      const people = parseNames(namesEl.value)
      const tpl = tplEl.value || ''
      const linkBase = linkEl.value || ''
      listEl.innerHTML = ''
      if(people.length===0){listEl.innerHTML = '<div class="text-sm text-yellow-600 dark:text-yellow-400">âš ï¸ Tidak ada nama. Masukkan minimal satu nama.</div>';return}

      people.forEach(p=>{
        const msg = makeMessage(tpl, p.name, linkBase)
        const item = createItem(msg, p)
        listEl.appendChild(item)
      })
    })

    copyAllBtn.addEventListener('click', async ()=>{
      const people = parseNames(namesEl.value)
      const tpl = tplEl.value || ''
      const linkBase = linkEl.value || ''
      if(people.length===0){alert('Tidak ada nama.');return}
      const all = people.map(p=>makeMessage(tpl,p.name,linkBase)).join('\n\n')
      try{await navigator.clipboard.writeText(all); alert('Semua pesan disalin ke clipboard.')}catch(e){prompt('Salin manual:', all)}
    })

    openAllBtn.addEventListener('click', ()=>{
      const people = parseNames(namesEl.value)
      const tpl = tplEl.value || ''
      const linkBase = linkEl.value || ''
      if(people.length===0){alert('Tidak ada nama.');return}
      const confirmOpen = confirm('Akan membuka ' + people.length + ' tab WhatsApp. Lanjutkan?')
      if(!confirmOpen) return
      people.forEach(p=>{
        const msg = makeMessage(tpl,p.name,linkBase)
        const encoded = encodeURIComponent(msg)
        let url = 'https://wa.me/?text=' + encoded
        if(p.phone){
          const num = p.phone.replace(/[^0-9]/g,'')
          url = 'https://wa.me/' + num + '?text=' + encoded
        }
        window.open(url,'_blank')
      })
    })

    // Mode Gelap Toggle
    toggleDark.addEventListener('click', ()=>{
      document.documentElement.classList.toggle('dark')
      const isDark = document.documentElement.classList.contains('dark')
      toggleDark.textContent = isDark ? 'â˜€ï¸ Mode Terang' : 'ğŸŒ™ Mode Gelap'
      localStorage.setItem('theme', isDark ? 'dark' : 'light')
    })

    if(localStorage.getItem('theme') === 'light'){
      document.documentElement.classList.remove('dark')
      toggleDark.textContent = 'ğŸŒ™ Mode Gelap'
    } else {
      document.documentElement.classList.add('dark')
      toggleDark.textContent = 'â˜€ï¸ Mode Terang'
    }
  </script>
</body>
</html>
